{"ast":null,"code":"import React,{useEffect}from'react';import{Paper,Typography,CircularProgress,Divider}from'@material-ui/core/';import{useDispatch,useSelector}from'react-redux';import moment from'moment';import{useParams,useNavigate}from'react-router-dom';import{getPost,getPostsBySearch}from'../../actions/posts';import CommentSection from'./CommentSection';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Post=()=>{const{post,posts,isLoading}=useSelector(state=>state.posts);const dispatch=useDispatch();const navigate=useNavigate();const classes=useStyles();const{id}=useParams();useEffect(()=>{dispatch(getPost(id));},[id]);useEffect(()=>{if(post){dispatch(getPostsBySearch({search:'none',tags:post===null||post===void 0?void 0:post.tags.join(',')}));}},[post]);if(!post)return null;const openPost=_id=>navigate(\"/posts/\".concat(_id));if(isLoading){return/*#__PURE__*/_jsx(Paper,{elevation:6,className:classes.loadingPaper,children:/*#__PURE__*/_jsx(CircularProgress,{size:\"7em\"})});}const recommendedPosts=posts.filter(_ref=>{let{_id}=_ref;return _id!==post._id;});return/*#__PURE__*/_jsxs(Paper,{style:{padding:'20px',borderRadius:'15px'},elevation:6,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.card,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.section,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h2\",children:post.title}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",color:\"textSecondary\",component:\"h2\",children:post.tags.map(tag=>\"#\".concat(tag,\" \"))}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"body1\",component:\"p\",children:post.message}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\"Created by: \",post.name]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:moment(post.createdAt).fromNow()}),/*#__PURE__*/_jsx(Divider,{style:{margin:'20px 0'}}),/*#__PURE__*/_jsx(CommentSection,{post:post}),/*#__PURE__*/_jsx(Divider,{style:{margin:'20px 0'}})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.imageSection,children:/*#__PURE__*/_jsx(\"img\",{className:classes.media,src:post.selectedFile||'https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png',alt:post.title})})]}),!!recommendedPosts.length&&/*#__PURE__*/_jsxs(\"div\",{className:classes.section,children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h5\",children:\"You might also like:\"}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(\"div\",{className:classes.recommendedPosts,children:recommendedPosts.map(_ref2=>{let{title,name,message,likes,selectedFile,_id}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{style:{margin:'20px',cursor:'pointer'},onClick:()=>openPost(_id),children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",children:title}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"subtitle2\",children:name}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"subtitle2\",children:message}),/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,variant:\"subtitle1\",children:[\"Likes: \",likes.length]}),/*#__PURE__*/_jsx(\"img\",{src:selectedFile,width:\"200px\"})]},_id);})})]})]});};export default Post;","map":{"version":3,"names":["React","useEffect","Paper","Typography","CircularProgress","Divider","useDispatch","useSelector","moment","useParams","useNavigate","getPost","getPostsBySearch","CommentSection","useStyles","jsx","_jsx","jsxs","_jsxs","Post","post","posts","isLoading","state","dispatch","navigate","classes","id","search","tags","join","openPost","_id","concat","elevation","className","loadingPaper","children","size","recommendedPosts","filter","_ref","style","padding","borderRadius","card","section","variant","component","title","gutterBottom","color","map","tag","message","name","createdAt","fromNow","margin","imageSection","media","src","selectedFile","alt","length","_ref2","likes","cursor","onClick","width"],"sources":["/Users/deekshitha/Desktop/My_projects /Memories/client/src/components/PostDetails/PostDetails.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Paper, Typography, CircularProgress, Divider } from '@material-ui/core/';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\nimport { useParams, useNavigate } from 'react-router-dom';\n\nimport { getPost, getPostsBySearch } from '../../actions/posts';\nimport CommentSection from './CommentSection';\nimport useStyles from './styles';\n\nconst Post = () => {\n  const { post, posts, isLoading } = useSelector((state) => state.posts);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const classes = useStyles();\n  const { id } = useParams();\n\n  useEffect(() => {\n    dispatch(getPost(id));\n  }, [id]);\n\n  useEffect(() => {\n    if (post) {\n      dispatch(getPostsBySearch({ search: 'none', tags: post?.tags.join(',') }));\n    }\n  }, [post]);\n\n  if (!post) return null;\n\n  const openPost = (_id) => navigate(`/posts/${_id}`);\n\n  if (isLoading) {\n    return (\n      <Paper elevation={6} className={classes.loadingPaper}>\n        <CircularProgress size=\"7em\" />\n      </Paper>\n    );\n  }\n\n  const recommendedPosts = posts.filter(({ _id }) => _id !== post._id);\n\n  return (\n    <Paper style={{ padding: '20px', borderRadius: '15px' }} elevation={6}>\n      <div className={classes.card}>\n        <div className={classes.section}>\n          <Typography variant=\"h3\" component=\"h2\">{post.title}</Typography>\n          <Typography gutterBottom variant=\"h6\" color=\"textSecondary\" component=\"h2\">{post.tags.map((tag) => `#${tag} `)}</Typography>\n          <Typography gutterBottom variant=\"body1\" component=\"p\">{post.message}</Typography>\n          <Typography variant=\"h6\">Created by: {post.name}</Typography>\n          <Typography variant=\"body1\">{moment(post.createdAt).fromNow()}</Typography>\n          <Divider style={{ margin: '20px 0' }} />\n          <CommentSection post={post} />\n          <Divider style={{ margin: '20px 0' }} />\n        </div>\n        <div className={classes.imageSection}>\n          <img className={classes.media} src={post.selectedFile || 'https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png'} alt={post.title} />\n        </div>\n      </div>\n      {!!recommendedPosts.length && (\n        <div className={classes.section}>\n          <Typography gutterBottom variant=\"h5\">You might also like:</Typography>\n          <Divider />\n          <div className={classes.recommendedPosts}>\n            {recommendedPosts.map(({ title, name, message, likes, selectedFile, _id }) => (\n              <div style={{ margin: '20px', cursor: 'pointer' }} onClick={() => openPost(_id)} key={_id}>\n                <Typography gutterBottom variant=\"h6\">{title}</Typography>\n                <Typography gutterBottom variant=\"subtitle2\">{name}</Typography>\n                <Typography gutterBottom variant=\"subtitle2\">{message}</Typography>\n                <Typography gutterBottom variant=\"subtitle1\">Likes: {likes.length}</Typography>\n                <img src={selectedFile} width=\"200px\" />\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </Paper>\n  );\n};\n\nexport default Post;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}