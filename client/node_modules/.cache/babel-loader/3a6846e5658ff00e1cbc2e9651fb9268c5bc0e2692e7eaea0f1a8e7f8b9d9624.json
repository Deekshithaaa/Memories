{"ast":null,"code":"import{START_LOADING,END_LOADING,FETCH_ALL,FETCH_POST,FETCH_BY_SEARCH,CREATE,UPDATE,DELETE,LIKE,COMMENT}from'../constants/actionTypes';import*as api from'../api/index.js';export const getPost=id=>async dispatch=>{try{dispatch({type:START_LOADING});const{data}=await api.fetchPost(id);dispatch({type:FETCH_POST,payload:{post:data}});}catch(error){console.log(error);}};export const getPosts=page=>async dispatch=>{try{dispatch({type:START_LOADING});const{data:{data,currentPage,numberOfPages}}=await api.fetchPosts(page);dispatch({type:FETCH_ALL,payload:{data,currentPage,numberOfPages}});dispatch({type:END_LOADING});}catch(error){console.log(error);}};export const getPostsBySearch=searchQuery=>async dispatch=>{try{dispatch({type:START_LOADING});const{data:{data}}=await api.fetchPostsBySearch(searchQuery);dispatch({type:FETCH_BY_SEARCH,payload:{data}});dispatch({type:END_LOADING});}catch(error){console.log(error);}};export const createPost=(post,history)=>async dispatch=>{try{dispatch({type:START_LOADING});const{data}=await api.createPost(post);dispatch({type:CREATE,payload:data});history(\"/posts/\".concat(data._id));}catch(error){console.log(error);}};export const updatePost=(id,post)=>async dispatch=>{try{const{data}=await api.updatePost(id,post);dispatch({type:UPDATE,payload:data});}catch(error){console.log(error);}};export const likePost=id=>async dispatch=>{const user=JSON.parse(localStorage.getItem('profile'));try{const{data}=await api.likePost(id,user===null||user===void 0?void 0:user.token);dispatch({type:LIKE,payload:data});}catch(error){console.log(error);}};export const commentPost=(value,id)=>async dispatch=>{try{const{data}=await api.comment(value,id);dispatch({type:COMMENT,payload:data});return data.comments;}catch(error){console.log(error);}};export const deletePost=id=>async dispatch=>{try{await await api.deletePost(id);dispatch({type:DELETE,payload:id});}catch(error){console.log(error);}};","map":{"version":3,"names":["START_LOADING","END_LOADING","FETCH_ALL","FETCH_POST","FETCH_BY_SEARCH","CREATE","UPDATE","DELETE","LIKE","COMMENT","api","getPost","id","dispatch","type","data","fetchPost","payload","post","error","console","log","getPosts","page","currentPage","numberOfPages","fetchPosts","getPostsBySearch","searchQuery","fetchPostsBySearch","createPost","history","concat","_id","updatePost","likePost","user","JSON","parse","localStorage","getItem","token","commentPost","value","comment","comments","deletePost"],"sources":["/Users/deekshitha/Desktop/My_projects /Memories/client/src/actions/posts.js"],"sourcesContent":["import { START_LOADING, END_LOADING, FETCH_ALL, FETCH_POST, FETCH_BY_SEARCH, CREATE, UPDATE, DELETE, LIKE, COMMENT } from '../constants/actionTypes';\nimport * as api from '../api/index.js';\n\nexport const getPost = (id) => async (dispatch) => {\n  try {\n    dispatch({ type: START_LOADING });\n\n    const { data } = await api.fetchPost(id);\n\n    dispatch({ type: FETCH_POST, payload: { post: data } });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const getPosts = (page) => async (dispatch) => {\n  try {\n    dispatch({ type: START_LOADING });\n    const { data: { data, currentPage, numberOfPages } } = await api.fetchPosts(page);\n\n    dispatch({ type: FETCH_ALL, payload: { data, currentPage, numberOfPages } });\n    dispatch({ type: END_LOADING });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const getPostsBySearch = (searchQuery) => async (dispatch) => {\n  try {\n    dispatch({ type: START_LOADING });\n    const { data: { data } } = await api.fetchPostsBySearch(searchQuery);\n\n    dispatch({ type: FETCH_BY_SEARCH, payload: { data } });\n    dispatch({ type: END_LOADING });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const createPost = (post, history) => async (dispatch) => {\n  try {\n    dispatch({ type: START_LOADING });\n    const { data } = await api.createPost(post);\n\n    dispatch({ type: CREATE, payload: data });\n\n    history(`/posts/${data._id}`);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const updatePost = (id, post) => async (dispatch) => {\n  try {\n    const { data } = await api.updatePost(id, post);\n\n    dispatch({ type: UPDATE, payload: data });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const likePost = (id) => async (dispatch) => {\n  const user = JSON.parse(localStorage.getItem('profile'));\n\n  try {\n    const { data } = await api.likePost(id, user?.token);\n\n    dispatch({ type: LIKE, payload: data });\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const commentPost = (value, id) => async (dispatch) => {\n  try {\n    const { data } = await api.comment(value, id);\n\n    dispatch({ type: COMMENT, payload: data });\n\n    return data.comments;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const deletePost = (id) => async (dispatch) => {\n  try {\n    await await api.deletePost(id);\n\n    dispatch({ type: DELETE, payload: id });\n  } catch (error) {\n    console.log(error);\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}