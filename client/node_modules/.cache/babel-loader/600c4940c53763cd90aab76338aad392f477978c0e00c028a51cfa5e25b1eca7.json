{"ast":null,"code":"import React,{useState,useEffect}from'react';import{AppBar,Avatar,Button,Toolbar,Typography}from'@material-ui/core';import memoriesLogo from\"../../images/memoriesLogo.png\";import memoriesText from\"../../images/memoriesText.png\";import useStyles from'./styles.js';import{Link}from'react-router-dom';import{jwtDecode}from'jwt-decode';import{useDispatch}from'react-redux';import{useNavigate,useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Navbar=()=>{var _user$result,_user$result2,_tokenPayload$name,_user$result3,_user$result4,_user$result5;const navigate=useNavigate();const classes=useStyles();const[user,setUser]=useState(JSON.parse(localStorage.getItem(\"profile\")));const dispatch=useDispatch();const location=useLocation();const u=user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name;useEffect(()=>{const token=user===null||user===void 0?void 0:user.token;if(token){const decodedToken=jwtDecode(token);if(decodedToken.exp*1000<new Date().getTime()){logout();}}setUser(JSON.parse(localStorage.getItem(\"profile\")));},[location]);const decodeToken=token=>{try{return jwtDecode(token);}catch(error){console.error(\"Error decoding token\",error);return null;}};const tokenPayload=user?decodeToken(user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.credential):null;const logout=()=>{dispatch({type:'LOGOUT'});navigate('/auth');setUser(null);};return/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:classes.brandContainer,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:memoriesText,alt:\"memories\",height:\"60\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:memoriesLogo,alt:\"memories\",height:\"60\"})]}),/*#__PURE__*/_jsx(Toolbar,{className:classes.toolbar,children:user?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[!u&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:tokenPayload===null||tokenPayload===void 0?void 0:tokenPayload.name,src:tokenPayload===null||tokenPayload===void 0?void 0:tokenPayload.imageUrl,children:tokenPayload===null||tokenPayload===void 0?void 0:(_tokenPayload$name=tokenPayload.name)===null||_tokenPayload$name===void 0?void 0:_tokenPayload$name.charAt(0)}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:tokenPayload===null||tokenPayload===void 0?void 0:tokenPayload.name})]}),u&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.name,src:tokenPayload===null||tokenPayload===void 0?void 0:tokenPayload.imageUrl,children:user===null||user===void 0?void 0:(_user$result4=user.result)===null||_user$result4===void 0?void 0:_user$result4.name.charAt(0)}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:user===null||user===void 0?void 0:(_user$result5=user.result)===null||_user$result5===void 0?void 0:_user$result5.name})]}),/*#__PURE__*/_jsx(Button,{component:Link,to:\"/auth\",variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout,children:\"Logout\"})]}):/*#__PURE__*/_jsx(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\",children:\"Sign In\"})})]});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","AppBar","Avatar","Button","Toolbar","Typography","memoriesLogo","memoriesText","useStyles","Link","jwtDecode","useDispatch","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Navbar","_user$result","_user$result2","_tokenPayload$name","_user$result3","_user$result4","_user$result5","navigate","classes","user","setUser","JSON","parse","localStorage","getItem","dispatch","location","u","result","name","token","decodedToken","exp","Date","getTime","logout","decodeToken","error","console","tokenPayload","credential","type","className","appBar","position","color","children","to","brandContainer","image","src","alt","height","toolbar","profile","purple","imageUrl","charAt","userName","variant","component","onClick"],"sources":["/Users/deekshitha/Desktop/My_projects /Memories/client/src/components/Navbar/Navbar.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { AppBar, Avatar, Button, Toolbar, Typography } from '@material-ui/core';\nimport memoriesLogo from \"../../images/memoriesLogo.png\";\nimport memoriesText from \"../../images/memoriesText.png\";\nimport useStyles from './styles.js';\nimport {Link} from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport { useDispatch } from 'react-redux';\nimport { useNavigate, useLocation } from 'react-router-dom';\n\nconst Navbar = () => {\n    const navigate = useNavigate();\n    const classes = useStyles();\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"profile\")));\n    const dispatch = useDispatch(); \n    const location = useLocation();\n   \n    \n   const u = user?.result?.name\n   \n\n    useEffect (()=> {\n        const token = user?.token;\n        if (token) {\n            const decodedToken = jwtDecode(token);\n            if (decodedToken.exp * 1000 < new Date().getTime()){\n                logout()\n            }\n        }\n\n\n        setUser(JSON.parse(localStorage.getItem(\"profile\")));\n    }, [location]);\n\n    const decodeToken = (token) => {\n        try {\n            return jwtDecode(token);\n        } catch (error) {\n            console.error(\"Error decoding token\", error);\n            return null;\n        }\n    };\n\n    const tokenPayload = user ? decodeToken(user?.result?.credential) : null;\n\n    const logout = () => {\n        dispatch({type : 'LOGOUT'});\n        navigate('/auth');\n        setUser(null);\n    };\n\n    return (\n        <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\n            <Link to='/' className={classes.brandContainer}>\n                <img className={classes.image} src={memoriesText} alt=\"memories\" height=\"60\"/>\n                <img className={classes.image} src={memoriesLogo} alt=\"memories\" height=\"60\"/>\n            </Link>\n            <Toolbar className={classes.toolbar}>\n                {user ? (\n                    <div className={classes.profile}>\n                        {(!u) && (\n                            <>\n                            <Avatar className={classes.purple} alt={tokenPayload?.name} src={tokenPayload?.imageUrl}>{tokenPayload?.name?.charAt(0)}</Avatar>\n                        <Typography className={classes.userName} variant='h6'>{tokenPayload?.name}</Typography>\n\n                            </>\n\n                        )}\n                        \n                        {(u) && (\n                            <>\n                            <Avatar className={classes.purple} alt={user?.result?.name} src={tokenPayload?.imageUrl}>{user?.result?.name.charAt(0)}</Avatar>\n                            <Typography className={classes.userName} variant='h6'>{user?.result?.name}</Typography>\n\n                             </>\n                            \n                        )}\n                        \n                        \n                        <Button component={Link} to='/auth' variant=\"contained\" className={classes.logout} color=\"secondary\" onClick={logout}>Logout</Button>\n                    </div>\n                ) : (\n                    <Button component={Link} to='/auth' variant='contained' color=\"primary\">Sign In</Button>\n                )}\n            </Toolbar>\n        </AppBar>\n    );\n};\n\nexport default Navbar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}