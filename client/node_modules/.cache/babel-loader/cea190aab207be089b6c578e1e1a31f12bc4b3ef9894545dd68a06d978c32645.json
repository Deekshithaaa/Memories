{"ast":null,"code":"import React,{useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Avatar,Button,Paper,Grid,Typography,Container,Snackbar,SnackbarContent}from'@material-ui/core';import{useNavigate}from'react-router-dom';import{GoogleLogin}from'@react-oauth/google';import LockOutlinedIcon from'@material-ui/icons/LockOutlined';import{jwtDecode}from'jwt-decode';import Icon from'./icon';import{signin,signup}from'../../actions/auth';import{AUTH,AUTH_ERROR}from'../../constants/actionTypes';import useStyles from'./styles';import Input from'./input';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const initialState={firstName:'',lastName:'',email:'',password:'',confirmPassword:''};const SignUp=()=>{const[form,setForm]=useState(initialState);const[isSignup,setIsSignup]=useState(false);const dispatch=useDispatch();const navigate=useNavigate();const classes=useStyles();const authError=useSelector(state=>state.auth.error);const[showPassword,setShowPassword]=useState(false);const handleShowPassword=()=>setShowPassword(!showPassword);const switchMode=()=>{setForm(initialState);setIsSignup(prevIsSignup=>!prevIsSignup);setShowPassword(false);};const handleSubmit=async e=>{e.preventDefault();if(isSignup){dispatch(signup(form,navigate)).catch(()=>{dispatch({type:AUTH_ERROR});});}else{dispatch(signin(form,navigate)).catch(()=>{dispatch({type:AUTH_ERROR});});}};const googleSuccess=async res=>{console.log(res);console.log('here is jwt');const decodedToken=jwtDecode(res===null||res===void 0?void 0:res.credential);console.log(decodedToken.name);const result=res;const token=res===null||res===void 0?void 0:res.credential;try{dispatch({type:'AUTH',data:{result,token}});navigate('/');}catch(error){console.log(error);}};const googleError=()=>console.log('Google Sign In was unsuccessful. Try again later');const handleChange=e=>setForm({...form,[e.target.name]:e.target.value});return/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsxs(Paper,{className:classes.paper,elevation:6,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:isSignup?'Sign up':'Sign in'}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[isSignup&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Input,{name:\"firstName\",label:\"First Name\",handleChange:handleChange,autoFocus:true,half:true}),/*#__PURE__*/_jsx(Input,{name:\"lastName\",label:\"Last Name\",handleChange:handleChange,half:true})]}),/*#__PURE__*/_jsx(Input,{name:\"email\",label:\"Email Address\",handleChange:handleChange,type:\"email\"}),/*#__PURE__*/_jsx(Input,{name:\"password\",label:\"Password\",handleChange:handleChange,type:showPassword?'text':'password',handleShowPassword:handleShowPassword}),isSignup&&/*#__PURE__*/_jsx(Input,{name:\"confirmPassword\",label:\"Repeat Password\",handleChange:handleChange,type:\"password\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,children:isSignup?'Sign Up':'Sign In'}),/*#__PURE__*/_jsx(GoogleLogin,{clientId:\"365553992329-don01c74hkhiotbo7ep8o145062ff8ks.apps.googleusercontent.com\",render:renderProps=>/*#__PURE__*/_jsx(Button,{className:classes.googleButton,color:\"primary\",fullWidth:true,onClick:renderProps.onClick,disabled:renderProps.disabled,startIcon:/*#__PURE__*/_jsx(Icon,{}),variant:\"contained\",children:\"Google Sign In\"}),onSuccess:googleSuccess,onFailure:googleError,cookiePolicy:\"single_host_origin\"}),/*#__PURE__*/_jsx(Grid,{container:true,justify:\"flex-end\",children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{onClick:switchMode,children:isSignup?'Already have an account? Sign in':\"Don't have an account? Sign Up\"})})})]})]}),/*#__PURE__*/_jsx(Snackbar,{open:!!authError,autoHideDuration:6000,onClose:()=>dispatch({type:AUTH_ERROR}),children:/*#__PURE__*/_jsx(SnackbarContent,{message:\"Please enter correct details.\",action:/*#__PURE__*/_jsx(Button,{color:\"inherit\",size:\"small\",onClick:()=>dispatch({type:AUTH_ERROR}),children:\"Dismiss\"})})})]});};export default SignUp;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","Avatar","Button","Paper","Grid","Typography","Container","Snackbar","SnackbarContent","useNavigate","GoogleLogin","LockOutlinedIcon","jwtDecode","Icon","signin","signup","AUTH","AUTH_ERROR","useStyles","Input","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","initialState","firstName","lastName","email","password","confirmPassword","SignUp","form","setForm","isSignup","setIsSignup","dispatch","navigate","classes","authError","state","auth","error","showPassword","setShowPassword","handleShowPassword","switchMode","prevIsSignup","handleSubmit","e","preventDefault","catch","type","googleSuccess","res","console","log","decodedToken","credential","name","result","token","data","googleError","handleChange","target","value","component","maxWidth","children","className","paper","elevation","avatar","variant","onSubmit","container","spacing","label","autoFocus","half","fullWidth","color","submit","clientId","render","renderProps","googleButton","onClick","disabled","startIcon","onSuccess","onFailure","cookiePolicy","justify","item","open","autoHideDuration","onClose","message","action","size"],"sources":["/Users/deekshitha/Desktop/My_projects /Memories/client/src/components/Auth/Auth.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Avatar, Button, Paper, Grid, Typography, Container, Snackbar, SnackbarContent } from '@material-ui/core';\nimport { useNavigate } from 'react-router-dom';\nimport { GoogleLogin } from '@react-oauth/google';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport { jwtDecode } from 'jwt-decode';\n\nimport Icon from './icon';\nimport { signin, signup } from '../../actions/auth';\nimport { AUTH, AUTH_ERROR } from '../../constants/actionTypes';\nimport useStyles from './styles';\nimport Input from './input';\n\nconst initialState = { firstName: '', lastName: '', email: '', password: '', confirmPassword: '' };\n\nconst SignUp = () => {\n  const [form, setForm] = useState(initialState);\n  const [isSignup, setIsSignup] = useState(false);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const classes = useStyles();\n  const authError = useSelector((state) => state.auth.error);\n\n  const [showPassword, setShowPassword] = useState(false);\n  const handleShowPassword = () => setShowPassword(!showPassword);\n\n  const switchMode = () => {\n    setForm(initialState);\n    setIsSignup((prevIsSignup) => !prevIsSignup);\n    setShowPassword(false);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (isSignup) {\n      dispatch(signup(form, navigate)).catch(() => {\n        dispatch({ type: AUTH_ERROR });\n      });\n    } else {\n      dispatch(signin(form, navigate)).catch(() => {\n        dispatch({ type: AUTH_ERROR });\n      });\n    }\n  };\n\n  const googleSuccess =  async (res) =>  {\n    console.log(res)\n    console.log('here is jwt')\n    const decodedToken = jwtDecode(res?.credential);\n    console.log(decodedToken.name);\n\n    const result = res;\n    const token = res?.credential;\n\n    try {\n        dispatch({type: 'AUTH', data: {result, token}});\n        navigate('/');\n        \n    } catch (error) {\n        console.log(error);\n    }\n  };\n\n  const googleError = () => console.log('Google Sign In was unsuccessful. Try again later');\n\n  const handleChange = (e) => setForm({ ...form, [e.target.name]: e.target.value });\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <Paper className={classes.paper} elevation={6}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">{ isSignup ? 'Sign up' : 'Sign in' }</Typography>\n        <form className={classes.form} onSubmit={handleSubmit}>\n          <Grid container spacing={2}>\n            { isSignup && (\n              <>\n                <Input name=\"firstName\" label=\"First Name\" handleChange={handleChange} autoFocus half />\n                <Input name=\"lastName\" label=\"Last Name\" handleChange={handleChange} half />\n              </>\n            )}\n            <Input name=\"email\" label=\"Email Address\" handleChange={handleChange} type=\"email\" />\n            <Input name=\"password\" label=\"Password\" handleChange={handleChange} type={showPassword ? 'text' : 'password'} handleShowPassword={handleShowPassword} />\n            { isSignup && <Input name=\"confirmPassword\" label=\"Repeat Password\" handleChange={handleChange} type=\"password\" /> }\n          </Grid>\n          <Button type=\"submit\" fullWidth variant=\"contained\" color=\"primary\" className={classes.submit}>\n            { isSignup ? 'Sign Up' : 'Sign In' }\n          </Button>\n          <GoogleLogin\n            clientId=\"365553992329-don01c74hkhiotbo7ep8o145062ff8ks.apps.googleusercontent.com\"\n            render={(renderProps) => (\n              <Button className={classes.googleButton} color='primary' fullWidth onClick={renderProps.onClick} disabled={renderProps.disabled} startIcon={<Icon />} variant=\"contained\">\n                Google Sign In\n              </Button>\n            )}\n            onSuccess={googleSuccess}\n            onFailure={googleError}\n            cookiePolicy=\"single_host_origin\"\n          />\n          <Grid container justify=\"flex-end\">\n            <Grid item>\n              <Button onClick={switchMode}>\n                { isSignup ? 'Already have an account? Sign in' : \"Don't have an account? Sign Up\" }\n              </Button>\n            </Grid>\n          </Grid>\n        </form>\n      </Paper>\n      <Snackbar\n        open={!!authError}\n        autoHideDuration={6000}\n        onClose={() => dispatch({ type: AUTH_ERROR })}\n      >\n        <SnackbarContent\n          message=\"Please enter correct details.\"\n          action={\n            <Button color=\"inherit\" size=\"small\" onClick={() => dispatch({ type: AUTH_ERROR })}>\n              Dismiss\n            </Button>\n          }\n        />\n      </Snackbar>\n    </Container>\n  );\n};\n\nexport default SignUp;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}