{"ast":null,"code":"import React,{useState,useRef}from'react';import{Typography,TextField,Button}from'@material-ui/core/';import{useDispatch}from'react-redux';import{jwtDecode}from'jwt-decode';import{commentPost}from'../../actions/posts';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CommentSection=_ref=>{let{post}=_ref;const user=JSON.parse(localStorage.getItem('profile'));const[comment,setComment]=useState('');const dispatch=useDispatch();const[comments,setComments]=useState(post===null||post===void 0?void 0:post.comments);const classes=useStyles();const commentsRef=useRef();const handleComment=async()=>{var _user$result;let newComments;// Declare newComments variable\nconst u=user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name;if(!u){var _jwtDecode,_user$result2;const decodedName=(_jwtDecode=jwtDecode(user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.credential))===null||_jwtDecode===void 0?void 0:_jwtDecode.name;newComments=await dispatch(commentPost(\"\".concat(decodedName,\": \").concat(comment),post._id));}else{var _user$result3;newComments=await dispatch(commentPost(\"\".concat(user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.name,\": \").concat(comment),post._id));}setComment('');setComments(newComments);commentsRef.current.scrollIntoView({behavior:'smooth'});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.commentsOuterContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.commentsInnerContainer,children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",children:\"Comments\"}),comments===null||comments===void 0?void 0:comments.map((c,i)=>/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,variant:\"subtitle1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:c.split(': ')[0]}),c.split(':')[1]]},i)),/*#__PURE__*/_jsx(\"div\",{ref:commentsRef})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'70%'},children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",children:\"Write a comment\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,rows:4,variant:\"outlined\",label:\"Comment\",multiline:true,value:comment,onChange:e=>setComment(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{style:{marginTop:'10px'},fullWidth:true,disabled:!comment.length,color:\"primary\",variant:\"contained\",onClick:handleComment,children:\"Comment\"})]})]})});};export default CommentSection;","map":{"version":3,"names":["React","useState","useRef","Typography","TextField","Button","useDispatch","jwtDecode","commentPost","useStyles","jsx","_jsx","jsxs","_jsxs","CommentSection","_ref","post","user","JSON","parse","localStorage","getItem","comment","setComment","dispatch","comments","setComments","classes","commentsRef","handleComment","_user$result","newComments","u","result","name","_jwtDecode","_user$result2","decodedName","credential","concat","_id","_user$result3","current","scrollIntoView","behavior","children","className","commentsOuterContainer","commentsInnerContainer","gutterBottom","variant","map","c","i","split","ref","style","width","fullWidth","rows","label","multiline","value","onChange","e","target","marginTop","disabled","length","color","onClick"],"sources":["/Users/deekshitha/Desktop/My_projects /Memories/client/src/components/PostDetails/CommentSection.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Typography, TextField, Button } from '@material-ui/core/';\nimport { useDispatch } from 'react-redux';\nimport { jwtDecode } from 'jwt-decode';\nimport { commentPost } from '../../actions/posts';\nimport useStyles from './styles';\n\nconst CommentSection = ({ post }) => {\n  const user = JSON.parse(localStorage.getItem('profile'));\n  const [comment, setComment] = useState('');\n  const dispatch = useDispatch();\n  const [comments, setComments] = useState(post?.comments);\n  const classes = useStyles();\n  const commentsRef = useRef();\n  \n  \n\n  const handleComment = async () => {\n    let newComments; // Declare newComments variable\n\n    const u = user?.result?.name;\n    if (!u) {\n        const decodedName = jwtDecode(user?.result?.credential)?.name;\n        newComments = await dispatch(commentPost(`${decodedName}: ${comment}`, post._id));\n    } else {\n        newComments = await dispatch(commentPost(`${user?.result?.name}: ${comment}`, post._id));\n    }\n\n    setComment('');\n    setComments(newComments);\n\n    commentsRef.current.scrollIntoView({ behavior: 'smooth' });\n};\n\n\n\n  return (\n    <div>\n      <div className={classes.commentsOuterContainer}>\n        <div className={classes.commentsInnerContainer}>\n          <Typography gutterBottom variant=\"h6\">Comments</Typography>\n          {comments?.map((c, i) => (\n            <Typography key={i} gutterBottom variant=\"subtitle1\">\n              <strong>{c.split(': ')[0]}</strong>\n              {c.split(':')[1]}\n            </Typography>\n          ))}\n          <div ref={commentsRef} />\n        </div>\n        <div style={{ width: '70%' }}>\n          <Typography gutterBottom variant=\"h6\">Write a comment</Typography>\n          <TextField fullWidth rows={4} variant=\"outlined\" label=\"Comment\" multiline value={comment} onChange={(e) => setComment(e.target.value)} />\n          <br />\n          <Button style={{ marginTop: '10px' }} fullWidth disabled={!comment.length} color=\"primary\" variant=\"contained\" onClick={handleComment}>\n            Comment\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CommentSection;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC/C,OAASC,UAAU,CAAEC,SAAS,CAAEC,MAAM,KAAQ,oBAAoB,CAClE,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,SAAS,KAAQ,YAAY,CACtC,OAASC,WAAW,KAAQ,qBAAqB,CACjD,MAAO,CAAAC,SAAS,KAAM,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEjC,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,IAAA,CAC9B,KAAM,CAAAE,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAAC,CACxD,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAAuB,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACmB,QAAQ,CAAEC,WAAW,CAAC,CAAGzB,QAAQ,CAACe,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAES,QAAQ,CAAC,CACxD,KAAM,CAAAE,OAAO,CAAGlB,SAAS,CAAC,CAAC,CAC3B,KAAM,CAAAmB,WAAW,CAAG1B,MAAM,CAAC,CAAC,CAI5B,KAAM,CAAA2B,aAAa,CAAG,KAAAA,CAAA,GAAY,KAAAC,YAAA,CAChC,GAAI,CAAAC,WAAW,CAAE;AAEjB,KAAM,CAAAC,CAAC,CAAGf,IAAI,SAAJA,IAAI,kBAAAa,YAAA,CAAJb,IAAI,CAAEgB,MAAM,UAAAH,YAAA,iBAAZA,YAAA,CAAcI,IAAI,CAC5B,GAAI,CAACF,CAAC,CAAE,KAAAG,UAAA,CAAAC,aAAA,CACJ,KAAM,CAAAC,WAAW,EAAAF,UAAA,CAAG5B,SAAS,CAACU,IAAI,SAAJA,IAAI,kBAAAmB,aAAA,CAAJnB,IAAI,CAAEgB,MAAM,UAAAG,aAAA,iBAAZA,aAAA,CAAcE,UAAU,CAAC,UAAAH,UAAA,iBAAnCA,UAAA,CAAqCD,IAAI,CAC7DH,WAAW,CAAG,KAAM,CAAAP,QAAQ,CAAChB,WAAW,IAAA+B,MAAA,CAAIF,WAAW,OAAAE,MAAA,CAAKjB,OAAO,EAAIN,IAAI,CAACwB,GAAG,CAAC,CAAC,CACrF,CAAC,IAAM,KAAAC,aAAA,CACHV,WAAW,CAAG,KAAM,CAAAP,QAAQ,CAAChB,WAAW,IAAA+B,MAAA,CAAItB,IAAI,SAAJA,IAAI,kBAAAwB,aAAA,CAAJxB,IAAI,CAAEgB,MAAM,UAAAQ,aAAA,iBAAZA,aAAA,CAAcP,IAAI,OAAAK,MAAA,CAAKjB,OAAO,EAAIN,IAAI,CAACwB,GAAG,CAAC,CAAC,CAC5F,CAEAjB,UAAU,CAAC,EAAE,CAAC,CACdG,WAAW,CAACK,WAAW,CAAC,CAExBH,WAAW,CAACc,OAAO,CAACC,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAC9D,CAAC,CAIC,mBACEjC,IAAA,QAAAkC,QAAA,cACEhC,KAAA,QAAKiC,SAAS,CAAEnB,OAAO,CAACoB,sBAAuB,CAAAF,QAAA,eAC7ChC,KAAA,QAAKiC,SAAS,CAAEnB,OAAO,CAACqB,sBAAuB,CAAAH,QAAA,eAC7ClC,IAAA,CAACR,UAAU,EAAC8C,YAAY,MAACC,OAAO,CAAC,IAAI,CAAAL,QAAA,CAAC,UAAQ,CAAY,CAAC,CAC1DpB,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAE0B,GAAG,CAAC,CAACC,CAAC,CAAEC,CAAC,gBAClBxC,KAAA,CAACV,UAAU,EAAS8C,YAAY,MAACC,OAAO,CAAC,WAAW,CAAAL,QAAA,eAClDlC,IAAA,WAAAkC,QAAA,CAASO,CAAC,CAACE,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAS,CAAC,CAClCF,CAAC,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAFDD,CAGL,CACb,CAAC,cACF1C,IAAA,QAAK4C,GAAG,CAAE3B,WAAY,CAAE,CAAC,EACtB,CAAC,cACNf,KAAA,QAAK2C,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAM,CAAE,CAAAZ,QAAA,eAC3BlC,IAAA,CAACR,UAAU,EAAC8C,YAAY,MAACC,OAAO,CAAC,IAAI,CAAAL,QAAA,CAAC,iBAAe,CAAY,CAAC,cAClElC,IAAA,CAACP,SAAS,EAACsD,SAAS,MAACC,IAAI,CAAE,CAAE,CAACT,OAAO,CAAC,UAAU,CAACU,KAAK,CAAC,SAAS,CAACC,SAAS,MAACC,KAAK,CAAExC,OAAQ,CAACyC,QAAQ,CAAGC,CAAC,EAAKzC,UAAU,CAACyC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAE,CAAC,cAC1InD,IAAA,QAAK,CAAC,cACNA,IAAA,CAACN,MAAM,EAACmD,KAAK,CAAE,CAAEU,SAAS,CAAE,MAAO,CAAE,CAACR,SAAS,MAACS,QAAQ,CAAE,CAAC7C,OAAO,CAAC8C,MAAO,CAACC,KAAK,CAAC,SAAS,CAACnB,OAAO,CAAC,WAAW,CAACoB,OAAO,CAAEzC,aAAc,CAAAgB,QAAA,CAAC,SAEvI,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA/B,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}